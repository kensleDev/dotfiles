<script lang="ts">
  import { refreshSession } from "@/auth/guards.svelte";
  import { onMount } from "svelte";

  let { data } = $props();

  // Refresh session when landing on profile page
  // This ensures subscription status is up-to-date after checkout
  onMount(async () => {
    await refreshSession();
  });

  // const { user } = data;

  // let { data } = $props();
  // const { profile } = data;
</script>

<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">Profile</h1>

  <div class="mb-4">
    <!-- <p><strong>User ID:</strong> {user.id}</p> -->
    <!-- {#if profile.stripe_customer_id}
      <p><strong>Stripe Customer ID:</strong> {profile.stripe_customer_id}</p>
    {/if} -->
  </div>

  <!-- <div class="mb-4">
    {#if profile.subscriptionActive}
      <p class="text-green-600">✅ Subscription Active</p>
    {:else}
      <p class="text-red-600">❌ No Active Subscription</p>
      <Button href="/subscribe" class="mt-2">Subscribe Now</Button>
    {/if}
  </div> -->
</div>
